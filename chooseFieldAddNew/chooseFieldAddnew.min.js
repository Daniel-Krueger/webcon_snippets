window.dkrSPAproperties=window.dkrSPAproperties||{},window.dkr=window.dkr||{},dkr.chooseFieldAddNew={},dkr.chooseFieldAddNew.modalsId="Modals",dkr.chooseFieldAddNew.addNewButtonPopupSearchQuerySelector="a.picker-search-modal__add-new-button",dkr.chooseFieldAddNew.addNewButtonAutoCompleteSearchQuerySelector="a.autocomplete-dropdown-header__add-new-item, a.autocomplete-dropdown-footer__add-new-item",dkr.chooseFieldAddNew.executeSearchAgain=function(){const e=document.querySelector("#Modals button.picker-search-button");e&&e.click()},dkr.chooseFieldAddNew.modifyAddNewButton=function(e){const o=document.querySelector(e);o&&o.href.trim().toLowerCase().startsWith("javascript")&&(o.removeAttribute("target"),console.log("Updating add new button"))},dkr.chooseFieldAddNew.observeModalAndButton=function(e){if(window.dkrSPAproperties.chooseFieldAddNew_buttonObserver)return;{const o=document.getElementById(dkr.chooseFieldAddNew.modalsId);if(o)return void dkr.chooseFieldAddNew.observeAddNewButton(e,o)}if(window.dkrSPAproperties.chooseFieldAddNew_bodyObserver)return;console.log("Adding new 'choose field body' observer");const o=new MutationObserver((function(o,d){for(const r of o)if("childList"===r.type)for(const o of r.addedNodes)if(1===o.nodeType&&o.id===dkr.chooseFieldAddNew.modalsId)return dkr.chooseFieldAddNew.observeAddNewButton(e,o),d.disconnect(),void(window.dkrSPAproperties.chooseFieldAddNew_bodyObserver=null)}));o.observe(document.body,{childList:!0}),window.dkrSPAproperties.chooseFieldAddNew_bodyObserver=o},dkr.chooseFieldAddNew.observeAddNewButton=function(e,o){if(!o)return null;if(window.dkrSPAproperties.chooseFieldAddNew_buttonObserver)return;console.log("Adding new 'choose field add new button' observer");const d=new MutationObserver((function(){o.querySelector(dkr.chooseFieldAddNew.addNewButtonPopupSearchQuerySelector)&&e(dkr.chooseFieldAddNew.addNewButtonPopupSearchQuerySelector)}));return d.observe(o,{childList:!0,subtree:!0}),window.dkrSPAproperties.chooseFieldAddNew_buttonObserver=d,d},dkr.chooseFieldAddNew.observeDropdownAddNewButton=function(e){if(window.dkrSPAproperties.chooseFieldAddNew_dropdownObserver)return;const o=new MutationObserver((()=>{console.log("Choose field dropdown observer triggered");const o=document.body.querySelector(".webcon-dropdown");if(o){o.querySelector(dkr.chooseFieldAddNew.addNewButtonAutoCompleteSearchQuerySelector)&&e(dkr.chooseFieldAddNew.addNewButtonAutoCompleteSearchQuerySelector);const d=new MutationObserver((()=>{o.querySelector(dkr.chooseFieldAddNew.addNewButtonAutoCompleteSearchQuerySelector)&&e(dkr.chooseFieldAddNew.addNewButtonAutoCompleteSearchQuerySelector)}));d.observe(o,{childList:!0,subtree:!0}),window.dkrSPAproperties.chooseFieldAddNew_dropdownInnerObserver=d}}));o.observe(document.body,{childList:!0}),window.dkrSPAproperties.chooseFieldAddNew_dropdownObserver=o},dkr.chooseFieldAddNew.observeModalAndButton(dkr.chooseFieldAddNew.modifyAddNewButton),dkr.chooseFieldAddNew.observeDropdownAddNewButton(dkr.chooseFieldAddNew.modifyAddNewButton),console.log("Choose field add new button logic loaded.");