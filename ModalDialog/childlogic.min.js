if(-1==document.location.href.indexOf("isModal"))return;if(window.ccls=window.ccls||{},ccls.utils=ccls.utils||{},ccls.utils.getIdFromUrl=function(o,e){return void 0===e&&(e=document.location.href),e.match("/"+o+"/([0-9]*)/")[1]},ccls.modal=ccls.modal||{},ccls.modal.child=ccls.modal.child||{},ccls.modal.child.startDebugger=function(){if("modalDialogChild"==new URLSearchParams(document.location.search).get("debug")){debugger;return!0}return!1},ccls.modal.child.VersionDependingValues=[{version:"0.0.0.0",values:{customStyles:"\n       #formContainer { margin-top:0px;}      \n      "}},{version:"2025.1.1.1",values:{customStyles:"\n       #formContainer { margin-top:2px;;background-color: var(--colorNeutralBackground1)}\n        #centerPanel {background-color: var(--colorNeutralBackground1)}\n        div.dynamic-form {background-color: var(--colorNeutralBackground1) !important}\n      "}}],ccls.modal.child.versionValues=ccls.utils.getVersionValues(ccls.modal.child.VersionDependingValues),ccls.modal.trackNavigation=ccls.modal.trackNavigation||{},ccls.modal.trackNavigation.onUrlChange=function(){ccls.modal.child.startDebugger(),document.location.href.indexOf("element/confirm")>-1?setTimeout((()=>{let o=$("a",$(".signature"))[0].href,e=ccls.utils.getIdFromUrl("element",o),l=ccls.utils.getIdFromUrl("db",o);parent.ccls.modal.dialog.close({dbId:l,instanceId:e})}),400):ccls.modal.trackNavigation.infiniteUrlChangeCheck=setTimeout(ccls.modal.trackNavigation.onUrlChange,250)},ccls.modal.trackNavigation.infiniteUrlChangeCheck=setTimeout(ccls.modal.trackNavigation.onUrlChange,250),(()=>{console.log("Styling the child dialog.");let o=document.createElement("style"),e="#ffab0045",l="#ff9c00c4";["a24dcfc2-2b14-4de8-8af3-7952a0a2cf61","6ec43cab-2ccf-438a-b0be-54388d7b43be"].indexOf(window.initModel.userTheme)>-1&&(e="#ff9c00c4",l="#ffab0045"),1==ccls.modal.showFullForm?o.innerHTML=`\n      .dynamic-form.modern #pathPanel \n      #cclsCloseDialogButton} {\n      background-color: ${e};\n      }\n      .dynamic-form.modern #pathPanel \n      #cclsCloseDialogButton:hover {\n      background-color: ${l};\n      }\n      `:o.innerHTML=`\n      ${ccls.modal.child.versionValues.customStyles}\n      .dynamic-form.modern #pathPanel \n      #cclsCloseDialogButton} {\n      background-color: ${e};\n      }\n      .dynamic-form.modern #pathPanel \n      #cclsCloseDialogButton:hover {\n      background-color: ${l};\n      }\n      .top-bar-header,\n      .ms-promotedActionButton-text {\n        display: none;\n      }\n\n      .redux-toastr {\n        display: none;\n      }\n      .rightBar {\n        display:none;\n      }\n      `,document.getElementsByTagName("head")[0].appendChild(o)})(),ccls.modal.closeButton=ccls.modal.closeButton||{},ccls.modal.closeButton.label="",ccls.modal.closeButton.tryCounter=0,ccls.modal.closeButton.addCloseDialogButton=function(){if(1!=$(".ms-promotedActionButton-text").length)return void(ccls.modal.closeButton.tryCounter<5?(ccls.modal.closeButton.tryCounter++,setTimeout(ccls.modal.addCloseDialogButton,100)):console.log("Try counter exceeded maximum tries, close button won't be added."));console.log("Add close button to path panel"),$(".pathPanelRow").prepend($(".path-button-container").first().wrapAll("<div>").parent().html());let o=$(".pathPanelButton:first");o.attr("id","cclsCloseDialogButton"),o.attr("value",ccls.modal.closeButton.label),o.click((function(){parent.ccls.modal.dialog.close()})),$(".form-button__title",o).text(ccls.modal.closeButton.label)},1==ccls.modal.closeButton.displayAsPath){switch(window.initModel.userLang.substr(0,2)){case"de":ccls.modal.closeButton.label="Dialog schlieÃŸen";break;default:ccls.modal.closeButton.label="Close dialog";break}$(document).ready((function(){setTimeout(ccls.modal.closeButton.addCloseDialogButton,100)}))}class Message{constructor(o,e){this.type=o,this.body=e}}window.addEventListener("message",(o=>{let e=o.data;if("sendURL"==e.type){let o;o=document.location.href.indexOf("start/wf")>-1?`/db/${ccls.utils.getIdFromUrl("db")}/app/${GetPairID(G_APP)}/start/wf/${ccls.utils.getIdFromUrl("wf")}/dt/${ccls.utils.getIdFromUrl("dt")}/form`+document.location.search:`/db/${ccls.utils.getIdFromUrl("db")}/app/${GetPairID(G_APP)}/element/${GetPairID(G_WFELEM)}/form`+document.location.search,window.parent.postMessage(new Message("fullUrl",{url:o}))}if("parentClosing"==e.type){if(-1==document.location.href.indexOf("start/wf")&&-1==document.location.href.indexOf("/confirm")&&G_EDITVIEW){let o=ccls.utils.getIdFromUrl("element");console.log("Execute release checkout for child instance:"+o);let e={method:"GET",headers:{}};fetch(`/api/nav/db/${ccls.utils.getIdFromUrl("db")}/app/${GetPairID(G_APP)}/element/${o}/checkout/release`,e).then((()=>{}))}console.log("Child dialog closed"),window.parent.postMessage(new Message("childClosed",e.body))}})),console.log("modal dialog child logic loaded");